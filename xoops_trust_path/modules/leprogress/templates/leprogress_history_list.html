<div class="leprogress">
<{include file="db:`$dirname`_inc_menu.html"}>

<h1><{$smarty.const._MD_LEPROGRESS_LANG_HISTORY_LIST}></h1>

<{if $item}>
<dl class="twocoltbl">
  <dt><{$smarty.const._MD_LEPROGRESS_LANG_TITLE}></dt>
  <dd><a href="<{$originalUrl}>"><{$item->getShow('title')}></a></dd>
  <dt><{$smarty.const._MD_LEPROGRESS_LANG_DIRNAME}></dt>
  <dd><{$item->getShow('dirname')}></dd>
  <dt><{$smarty.const._MD_LEPROGRESS_LANG_DATANAME}></dt>
  <dd><{$item->getShow('dataname')}></dd>
  <dt><{$smarty.const._MD_LEPROGRESS_LANG_TARGET_ID}></dt>
  <dd><{$item->getShow('target_id')}></dd>
  <dt><{$smarty.const._USERNAME}></dt>
  <dd><{$item->getShow('uid')|xoops_user:"user_name"}></dd>
  <dt><{$smarty.const._MD_LEPROGRESS_LANG_STEP}></dt>
  <dt><{$smarty.const._MD_LEPROGRESS_LANG_STATUS}></dt>
  <dd><{$item->getShowStatus()}></dd>
  <dt><{$smarty.const._MD_LEPROGRESS_LANG_POSTTIME}></dt>
  <dd><{$item->get('posttime')|xoops_formattimestamp:l}></dd>
</dl>
<{/if}>
<{if count($objects) > 0}>
  <div class="pagenavi"><{xoops_pagenavi pagenavi=$pageNavi}></div>
  <table class="outer" summary="">
    <thead>
      <tr>
        <th>
          <{$smarty.const._USERNAME}><br />
          <a href="<{$pageNavi->renderUrlForSort()}>&amp;<{$pageNavi->getPrefix()}>sort=<{$smarty.const.LEPROGRESS_HISTORY_SORT_KEY_UID}>"><img src="images/up.gif" alt="<{$smarty.const._ASCENDING}>" title="<{$smarty.const._ASCENDING}>" /></a>
          <a href="<{$pageNavi->renderUrlForSort()}>&amp;<{$pageNavi->getPrefix()}>sort=-<{$smarty.const.LEPROGRESS_HISTORY_SORT_KEY_UID}>"><img src="images/down.gif" alt="<{$smarty.const._DESCENDING}>" title="<{$smarty.const._DESCENDING}>" /></a>
        </th>
        <th>
          <{$smarty.const._MD_LEPROGRESS_LANG_STEP}><br />
          <a href="<{$pageNavi->renderUrlForSort()}>&amp;<{$pageNavi->getPrefix()}>sort=<{$smarty.const.LEPROGRESS_HISTORY_SORT_KEY_STEP}>"><img src="images/up.gif" alt="<{$smarty.const._ASCENDING}>" title="<{$smarty.const._ASCENDING}>" /></a>
          <a href="<{$pageNavi->renderUrlForSort()}>&amp;<{$pageNavi->getPrefix()}>sort=-<{$smarty.const.LEPROGRESS_HISTORY_SORT_KEY_STEP}>"><img src="images/down.gif" alt="<{$smarty.const._DESCENDING}>" title="<{$smarty.const._DESCENDING}>" /></a>
        </th>
        <th>
          <{$smarty.const._MD_LEPROGRESS_LANG_RESULT}><br />
          <a href="<{$pageNavi->renderUrlForSort()}>&amp;<{$pageNavi->getPrefix()}>sort=<{$smarty.const.LEPROGRESS_HISTORY_SORT_KEY_RESULT}>"><img src="images/up.gif" alt="<{$smarty.const._ASCENDING}>" title="<{$smarty.const._ASCENDING}>" /></a>
          <a href="<{$pageNavi->renderUrlForSort()}>&amp;<{$pageNavi->getPrefix()}>sort=-<{$smarty.const.LEPROGRESS_HISTORY_SORT_KEY_RESULT}>"><img src="images/down.gif" alt="<{$smarty.const._DESCENDING}>" title="<{$smarty.const._DESCENDING}>" /></a>
        </th>
        <th>
          <{$smarty.const._MD_LEPROGRESS_LANG_COMMENT}><br />
          <a href="<{$pageNavi->renderUrlForSort()}>&amp;<{$pageNavi->getPrefix()}>sort=<{$smarty.const.LEPROGRESS_HISTORY_SORT_KEY_COMMENT}>"><img src="images/up.gif" alt="<{$smarty.const._ASCENDING}>" title="<{$smarty.const._ASCENDING}>" /></a>
          <a href="<{$pageNavi->renderUrlForSort()}>&amp;<{$pageNavi->getPrefix()}>sort=-<{$smarty.const.LEPROGRESS_HISTORY_SORT_KEY_COMMENT}>"><img src="images/down.gif" alt="<{$smarty.const._DESCENDING}>" title="<{$smarty.const._DESCENDING}>" /></a>
        </th>
        <th>
          <{$smarty.const._MD_LEPROGRESS_LANG_POSTTIME}><br />
          <a href="<{$pageNavi->renderUrlForSort()}>&amp;<{$pageNavi->getPrefix()}>sort=<{$smarty.const.LEPROGRESS_HISTORY_SORT_KEY_POSTTIME}>"><img src="images/up.gif" alt="<{$smarty.const._ASCENDING}>" title="<{$smarty.const._ASCENDING}>" /></a>
          <a href="<{$pageNavi->renderUrlForSort()}>&amp;<{$pageNavi->getPrefix()}>sort=-<{$smarty.const.LEPROGRESS_HISTORY_SORT_KEY_POSTTIME}>"><img src="images/down.gif" alt="<{$smarty.const._DESCENDING}>" title="<{$smarty.const._DESCENDING}>" /></a>
        </th>
        <th><{$smarty.const._MD_LEPROGRESS_LANG_CONTROL}></th>
      </tr>
    </thead>
    <tbody>
      <{foreach item=obj from=$objects}>
        <tr class="<{cycle values='odd,even'}>">
          <td><{$obj->getShow('uid')|xoops_user:"user_name"}></td>
          <td><{$obj->getShow('step')}></td>
          <td><{$obj->getShowResult()}></td>
          <td><{$obj->getShow('comment')}></td>
          <td><{$obj->get('posttime')|xoops_formattimestamp:l}></td>
          <td>
            <a href="<{xoops_cooluri dirname=$dirname dataname=history query='progress_id='|cat:$obj->getShow('progress_id')}>"><{$smarty.const._VIEW}></a>
            <a href="<{xoops_cooluri dirname=$dirname dataname=history query='progress_id='|cat:$obj->getShow('progress_id') action=edit}>"><{$smarty.const._EDIT}></a>
            <a href="<{xoops_cooluri dirname=$dirname dataname=history query='progress_id='|cat:$obj->getShow('progress_id') action=delete}>"><{$smarty.const._DELETE}></a>
          </td>
        </tr>
      <{/foreach}>
    </tbody>
  </table>
  <div class="pagenavi"><{xoops_pagenavi pagenavi=$pageNavi}></div>
<{/if}>
</div>
